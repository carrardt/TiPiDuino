// Using a pan-tilt mounted camera to follow objects
{
	"FrameBufferObjects" :
	{
		"fbo1" : { "width" : "$WIDTH" , "height" : "$HEIGHT" } ,
		"fbo2" : { "width" : "$WIDTH" , "height" : "$HEIGHT" }
	}
    ,
    "GLShaders" :
    {
		"init" : {
			"vertex-shader" : "common_vs" ,
			"fragment-shader" : "maskInitL2Cross_fs" ,
			"rendering" : { "function" : "gl_fill" } ,
			"textures" : { "tex" : ["CAMERA"] } ,
			"output" : ["fbo1"] ,
			"passes" : 1
		}
		,
		"l2cross" : {
			"vertex-shader" : "common_vs" ,
			"fragment-shader" : "L2CrossIteration_fs" ,
			"rendering" : { "function" : "gl_fill" } ,
			"textures" : { "tex" : ["fbo1","fbo2"] } ,
			"output" : ["fbo2","fbo1"] ,
			"passes" : "$CCMD"
		}
		,
		"display" : {
			"vertex-shader" : "common_vs" ,
			"fragment-shader" : "drawL2Cross_fs" ,
			"rendering" : { "function" : "gl_fill" } ,
			"textures" : { "tex_l2cross" : ["l2cross"] , "tex_camera" : ["CAMERA"] } ,
			"output" : ["DISPLAY"] ,
			"passes" : 1
		}
		,
		"overlay" : {
			"vertex-shader" : "zhue_vs" ,
			"fragment-shader" : "color_fs" ,
			"rendering" : { "plugin" : "gpioPanTiltFollower" , "function" : "drawOverlay" } ,
			"output" : ["DISPLAY"] ,
			"passes" : 1
		}
    }
    ,
    "CPUFunctions" :
    {
		"glReadBack" : {
			"plugin" : "glReadBack" , 
			"setup" : "glReadBack_setup" ,
			"run" : "glReadBack_run" ,
			"thread-id" : 0
		}
		,
		"l2CrossCenter" : {
			"plugin" : "l2CrossCenter" , 
			"setup" : "l2CrossCenter_setup" ,
			"run" : "l2CrossCenter_run" ,
			"thread-id" : 1
		}
		,
		"gpioPanTiltFollower" : {
			"plugin" : "gpioPanTiltFollower" , 
			"setup" : "gpioPanTiltFollower_setup" ,
			"run" : "gpioPanTiltFollower_run" ,
			"thread-id" : 1
		}
		,
		"syncThread" : {
			"plugin" : "syncThread" , 
			"setup" : "syncThread_setup" ,
			"run" : "syncThread_run" ,
			"thread-id" : 0
		}
    }
    ,
    "ProcessingLoop" : [ "init", "l2cross", "glReadBack", "l2CrossCenter", "gpioPanTiltFollower", "syncThread", "display", "overlay" ]
}
